export type MarkerType = "home" | "food" | "cafe" | "attraction";

export interface MarkerIconData {
  svg: string;
  defaultColor: string;
}

// 선택된 마커의 색상
export const SELECTED_COLOR = "#FF4444";

// 각 마커 타입별 기본 색상 (선택되지 않은 상태) - 모두 R값 낮은 색상들
export const MARKER_COLORS: Record<MarkerType, string> = {
  home: "#4B5563", // 진한 회색 (숙소 - 세련됨, 안정감) R:75
  food: "#F4C430", // 파스텔 짙은 노란색 (음식점 - 따뜻함, 에너지) R:244
  cafe: "#A63D40", // 중간 버건디 (카페 - 우아함, 세련됨) R:166
  attraction: "#15803d", // 짙은 녹색 (여행지 - 자연, 깊이감) R:21
};

const HOME_MARKER_SVG = `
  <svg width="{{size}}" height="{{size}}" viewBox="0 0 100 125" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g>
      <path d="M50 0C30.016 0 13.816 16.201 13.816 36.185C13.816 64.987 50 100 50 100s36.184-35.013 36.184-63.815C86.184 16.201 69.984 0 50 0zM50 62.588c-14.583 0-26.404-11.821-26.404-26.403C23.596 21.602 35.417 9.78 50 9.78c14.582 0 26.404 11.821 26.404 26.404C76.404 50.767 64.582 62.588 50 62.588zM50 17.069l-6.063 6.124v-3.525h-6.929v10.525l-4.156 4.198h5.022v17.322h24.25V34.392h5.023L50 17.069zM54.956 40.129h-3.965v-3.965h3.965v3.965zM49.009 36.164v3.965h-3.965v-3.965h3.965zM45.044 42.111h3.965v3.965h-3.965v-3.965zM50.991 46.076v-3.965h3.965v3.965h-3.965z" fill="{{color}}"/>
    </g>
  </svg>
`;

const FOOD_MARKER_SVG = `
  <svg width="{{size}}" height="{{size}}" viewBox="0 0 100 125" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g>
      <path d="M50 0C30.016 0 13.816 16.2 13.816 36.185C13.816 64.987 50 100 50 100s36.184-35.013 36.184-63.815C86.184 16.2 69.984 0 50 0zM50 62.588c-14.583 0-26.404-11.821-26.404-26.403C23.596 21.602 35.417 9.78 50 9.78c14.582 0 26.404 11.821 26.404 26.404C76.404 50.767 64.582 62.588 50 62.588zM63.857 26.5c0 7.391 0 11.085 0 11.085c0 1.848-1.848 1.848-1.848 1.848v11.085c0 2.04-1.655 3.695-3.695 3.695c-2.041 0-3.695-1.655-3.695-3.695V17.262c4.238 0 9.238 1.847 9.238 9.238zM47.227 28.348h-1.848v-9.238h-3.693v9.238h-1.848v-9.238h-3.695v9.3c0 2.681 1.508 5.003 3.695 6.281v15.829c0 2.04 1.654 3.695 3.695 3.695c2.041 0 3.695-1.655 3.695-3.695v-15.78c2.198-1.267 3.695-3.612 3.695-6.329v-9.3h-3.697v9.3z" fill="{{color}}"/>
    </g>
  </svg>
`;

const CAFE_MARKER_SVG = `
  <svg width="{{size}}" height="{{size}}" viewBox="0 0 100 125" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g>
      <path d="M50 0C30.016 0 13.816 16.2 13.816 36.185C13.816 64.987 50 100 50 100s36.184-35.013 36.184-63.815C86.184 16.2 69.984 0 50 0zM50 62.588c-14.583 0-26.404-11.821-26.404-26.403C23.596 21.602 35.417 9.78 50 9.78c14.582 0 26.404 11.821 26.404 26.404C76.404 50.767 64.582 62.588 50 62.588zM34.16 30.112c0 4.935 3.249 8.942 7.998 9.406c1.206 2.971 3.66 4.908 6.813 5.792h-6.474c-0.65 0-1.177 0.527-1.177 1.177s0.527 1.178 1.177 1.178h22.167c0.65 0 1.177-0.527 1.177-1.178s-0.526-1.177-1.177-1.177h-7.067c4.732-1.273 8.244-4.735 8.244-10.323V23.811h-15.917v6.301zM36.63 26.135h4.739v8.232c0 0.829 0.078 1.604 0.227 2.325c-2.983-0.594-4.966-3.326-4.966-6.583v-3.974z" fill="{{color}}"/>
    </g>
  </svg>
`;

const ATTRACTION_MARKER_SVG = `
  <svg width="{{size}}" height="{{size}}" viewBox="0 0 100 125" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g>
      <path d="M50 0C29.883 0 13.574 16.309 13.574 36.426c0 15.803 10.064 29.254 24.133 34.297L50 100l12.293-29.277c14.068-5.043 24.133-18.494 24.133-34.297C86.426 16.309 70.117 0 50 0zM50 62.96c-14.647 0-26.521-11.874-26.521-26.521S35.353 9.918 50 9.918c14.646 0 26.521 11.874 26.521 26.521S64.647 62.961 50 62.96zM63.607 24.652c-0.006 0.007-0.012 0.014-0.018 0.021l-4.23 5.001l2.403 18.124c0.044 0.33-0.084 0.659-0.339 0.874l-1.947 1.64c-0.327 0.289-1.115 0.427-1.514-0.341l-5.744-12.6l-5.223 5.713l0.914 4.118c0.059 0.267 0.004 0.546-0.153 0.771l-2.151 3.074c-0.271 0.444-1.308 0.741-1.706-0.203l-1.346-3.438c-0.542 0.376-2.026 1.2-2.859 0.368c-0.803-0.802-0.321-2.123 0.086-2.862l-3.554-0.977c-0.687-0.185-1.031-1.044-0.381-1.675l2.833-2.463c0.207-0.179 0.478-0.264 0.75-0.232l4.19 0.479l5.136-5.792l-13.129-4.396c-0.481-0.161-0.932-0.784-0.498-1.47l1.426-2.108c0.186-0.275 0.501-0.435 0.833-0.428l18.277 0.496l4.529-4.731c0.006-0.007 0.014-0.013 0.02-0.02c1.461-1.443 3.233-2.158 4.293-1.545C65.2 20.453 65.523 22.257 63.607 24.652z" fill="{{color}}"/>
    </g>
  </svg>
`;

export const MARKER_SVGS: Record<MarkerType, string> = {
  home: HOME_MARKER_SVG,
  food: FOOD_MARKER_SVG,
  cafe: CAFE_MARKER_SVG,
  attraction: ATTRACTION_MARKER_SVG,
};

export const createMarkerIcon = (
  markerType: MarkerType,
  isSelected: boolean,
  size?: number
): google.maps.Icon => {
  const iconSize = size || (isSelected ? 52 : 40);
  const color = isSelected ? SELECTED_COLOR : MARKER_COLORS[markerType];
  const svgTemplate = MARKER_SVGS[markerType];

  const svg = svgTemplate
    .replace(/\{\{size\}\}/g, iconSize.toString())
    .replace(/\{\{color\}\}/g, color);

  return {
    url: `data:image/svg+xml;charset=UTF-8,${encodeURIComponent(svg)}`,
    scaledSize: { width: iconSize, height: iconSize } as google.maps.Size,
    anchor: { x: iconSize / 2, y: iconSize } as google.maps.Point,
  };
};
